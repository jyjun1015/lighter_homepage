<!DOCTYPE html>
<html lang="en">

<head>
    <title>Lighter-Monitoring</title>
    <meta charset="UTF-8">
    <meta name="description" content="LERAMIZ Landing Page Template">
    <meta name="keywords" content="LERAMIZ, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link href="img/favicon.ico" rel="shortcut icon" />
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.min.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/font-awesome.min.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/animate.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/owl.carousel.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" />
</head>

<body data-spy="scroll" data-offset="50">
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>
    <!-- Header section -->
     <header class="header-section" style="background-color:black;">
        <!-- 라인1 -->
        <div class="header-top"> 
            <!-- 라인2 -->
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 header-top-left">
                        <div class="top-info">
                            <i class="fa fa-phone"></i>
                            010 4741 7751
                        </div>
                        <div class="top-info">
                            <i class="fa fa-envelope"></i>
                            jyjun1015@naver.com
                        </div>
                    </div>
                    <div class="col-lg-6 text-lg-right header-top-right">
                        <!-- 양 사이드, 이후 flex 도입 -->
                        <div class="top-social">
                            <a href=""><i class="fa fa-facebook"></i></a>
                            <a href=""><i class="fa fa-twitter"></i></a>
                            <a href=""><i class="fa fa-instagram"></i></a>
                            <a href=""><i class="fa fa-pinterest"></i></a>
                            <a href=""><i class="fa fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div> 
    </header>
    <!-- Header section end -->

    <!-- <section class="hero-section">
        <div class="container hero-text text-black">
            <h2>Flask example for monitering & Actuating!!</h2>
            <p>
                Simple example for monitering data & actuate on web environment <br>
                This system consists of three elements : <br>
                <br>
                1) webserver <br>
                2) Database(MySQL) <br>
                3) Jet-son-nano<br>
                <br>
                (Both webserver & database is located on AWS)<br>
                There is a main Function in this system <br>
                1 Can get sensor information from Jet-son-nano<br>
            </p>
        </div>
    </section> -->

    <parent-section>
    <!-- Gas section -->
    <section class="services-section spad" style="background-color:aliceblue">
        <!-- 외부 신호 -->
        <div>

            <a href=""><button>외부 신호</button></a>
            <button id="SIGNAL" type="button" class="btn btn-primary active text-center" 
                style="margin-top:1px;width:200px;"></button>
        </div>

        <h2 class="text-center" style="padding-bottom:10px"> Gas Monitering Dashboard!</h2>
        <div class="container ">
            <div class="row">
                
                <!-- <img src="{{ img_data }}" alt="User Image"> -->
                <!-- <img src="{{ url_for('static', filename='image/img13.jpg') }}"> -->
                
                <!-- {% if True %}
                <img src="{{ url_for('static', filename=image_file) }}">
                {% endif %}  -->

                <div class="progress" style="height:60px;">
                    <div class="progress-bar" id="id_temp_bar" role="progressbar" aria-valuenow="50"
                        aria-valuemin="50" aria-valuemax="50">
                        <p class="text-white" id="id_temp_message" style="padding-top:15px;">외부 신호</p>
                    </div>
                </div>

                <div class="col-lg-6 offset-lg-1 pl-lg-0 text-center">
                    <div class="section-title text-black">
                        <p>Gas Table for Recent 5 values</p>
                    </div>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Datetime</th>
                                <th>Device_ID</th>
                                <th>State</th>
                                <th>Image_Path</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in range(1, 6) %}
                            <tr>
                                <td id="id_table_sticker_{{i}}_date"></td>
                                <td id="id_table_sticker_{{i}}_id"></td>
                                <td id="id_table_sticker_{{i}}_state"></td>
                                <td id="id_table_sticker_{{i}}_path"></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <!-- Gas section end -->

    <!-- Sticker section -->
    <section class="services-section spad" style="background-color:aliceblue">
        <h2 class="text-center" style="padding-bottom:15px"> Sticker Monitering Dashboard!</h2>
        <div class="container">
            <div class="row">

                <div class="progress" style="height:60px;">
                    <div class="progress-bar" role="progressbar" id="id_humid_bar" aria-valuenow="50"
                        aria-valuemin="50" aria-valuemax="50">
                        <p class="text-white" id="id_humid_message" style="padding-top:15px;">외부 신호</p>
                    </div>
                </div>
                    
                <div class="col-lg-6 offset-lg-1 pl-lg-0 text-center">
                    <div class="section-title text-black">
                        <p>Sticker Table for Recent 5 values</p>
                    </div>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Datetime</th>
                                <th>Device_ID</th>
                                <th>State</th>
                                <th>Image_Path</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for j in range(1, 6) %}
                            <tr>
                                <td id="id_table_gas_{{j}}_date"></td>
                                <td id="id_table_gas_{{j}}_id"></td>
                                <td id="id_table_gas_{{j}}_state"></td>
                                <td id="id_table_gas_{{j}}_path"></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>


        </div>
    </section>
    <!-- Sticker section end -->

    <!-- Device section -->
    <section class="services-section spad" style="background-color:aliceblue">
        <h2 class="text-center" style="padding-bottom:15px"> Device Monitering Dashboard!</h2>
        <div class="container">
            <div class="row">
                <div class="progress" style="height:60px;">
                    <div class="progress-bar" role="progressbar" id="id_humid_bar" aria-valuenow="50"
                        aria-valuemin="50" aria-valuemax="50">
                        <p class="text-white" id="id_humid_message" style="padding-top:15px;">외부 신호</p>
                    </div>
                </div>
                    
                <div class="col-lg-6 offset-lg-1 pl-lg-0 text-center">
                    <div class="section-title text-black">
                        <p>Device Table for Recent 5 values</p>
                    </div>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Datetime</th>
                                <th>Device_ID</th>
                                <th>CPU</th>
                                <th>GPU</th>
                                <th>AO</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in range(1, 6) %}
                            <tr>
                                <td id="id_table_device_{{i}}_date"></td>
                                <td id="id_table_device_{{i}}_id"></td>
                                <td id="id_table_device_{{i}}_temp1"></td>
                                <td id="id_table_device_{{i}}_temp2"></td>
                                <td id="id_table_device_{{i}}_temp3"></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>


        </div>
    </section>
    <!-- Device section end -->

    <!-- Footer section -->
    <footer class="footer-section" style="background-color:white">
        <div class="contact-widget">
            <h5 class="fw-title">CONTACT US</h5>
            <p><i class="fa fa-map-marker"></i>04620 중구 필동로 1길 30 동국대학교</p>
            <p><i class="fa fa-phone"></i>전화 : 010-4741-7751</p>
            <p><i class="fa fa-envelope"></i>jyjun1015@gmail.com</p>
            <p><i class="fa fa-clock-o"></i>월 - 금, 9AM ~ 11PM</p>
        </div>
    </footer>
    <!-- Footer section end -->
    </parent-section>

</body>
<!--====== Javascripts & Jquery ======-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
<script src="{{url_for('static', filename='js/owl.carousel.min.js')}}"></script>
<script src="{{url_for('static', filename='js/masonry.pkgd.min.js')}}"></script>
<script src="{{url_for('static', filename='js/magnific-popup.min.js')}}"></script>
<script src="{{url_for('static', filename='js/main.js')}}"></script>
<script src="{{url_for('static', filename='js/guage.js')}}"></script>
<script>

    // 외부신호 버튼
    let signal = 0;
    $(function () {
        $("button").click(function () {

            // 새로고침

            $.get('/update', { input: signal }, function (data, success) {
                if (signal == 0) {
                    signal = 1;
                    $("#SIGNAL").fadeTo('slow', 1);
                    $("#SIGNAL").text("외부 신호 O");
                }
                else {
                    signal = 0;
                    $("#SIGNAL").fadeTo('slow', 0.15);
                    $("#SIGNAL").text("외부 신호 X");
                }
            });
        });
    })
    $(document).ready(function () {

        $("#SIGNAL").fadeTo('slow', 0.3);
        $("#SIGNAL").text("외부 신호 대기");

        $.getJSON('/getSticker', function (data) {
            for (i = 0; i < 5; i++) {
                const t = toString(i + 1);
                $('#id_table_sticker_'.concat(i + 1, '_date')).text(data[i][0]);
                $('#id_table_sticker_'.concat(i + 1, '_id')).text(data[i][1] + '번 기계');
                $('#id_table_sticker_'.concat(i + 1, '_state')).text(data[i][2]);
                $('#id_table_sticker_'.concat(i + 1, '_path')).text(data[i][3]);
            }

            // 이미지 넣는 자리 
            // $('#id_temp_bar').width(data[0][1] + 'gas_image')
            // $('#id_temp_message').text(data[0][1] + 'gas_image');
            
            // $('#id_humid_bar').width(data[0][2] + '%')
            // $('#id_humid_message').text(data[0][2] + 'sticker_image');
        });
        $.getJSON('/getGas', function (data) {
            for (i = 0; i < 5; i++) {
                const t = toString(i + 1);
                $('#id_table_gas_'.concat(i + 1, '_date')).text(data[i][0]);
                $('#id_table_gas_'.concat(i + 1, '_id')).text(data[i][1] + '번 기계');
                $('#id_table_gas_'.concat(i + 1, '_state')).text(data[i][2]);
                $('#id_table_gas_'.concat(i + 1, '_path')).text(data[i][3]);
            }
            
        });

        $.getJSON('/getDevice', function (data) {
            for (i = 0; i < 5; i++) {
                const t = toString(i + 1);
                $('#id_table_device_'.concat(i + 1, '_date')).text(data[i][1]);
                $('#id_table_device_'.concat(i + 1, '_id')).text(data[i][2] + '번 기계');
                $('#id_table_device_'.concat(i + 1, '_temp1')).text(data[i][3]);
                $('#id_table_device_'.concat(i + 1, '_temp2')).text(data[i][4]);
                $('#id_table_device_'.concat(i + 1, '_temp3')).text(data[i][5]);
            }
        });
    })

</script>
</html>
